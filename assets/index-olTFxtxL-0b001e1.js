import{r as o,_ as U,j as h,$ as j}from"./index-CFrvu99Y-0b001e1.js";import{u as x}from"./index-CPzO37nU-0b001e1.js";import{c as y}from"./index-Dc_FVRD7-0b001e1.js";import{P as b,d as M}from"./index-B42L2BaG-0b001e1.js";import{u as T}from"./utils-DGJa7bZG-0b001e1.js";import{u as P}from"./index-Dac5DslT-0b001e1.js";var z=U[" useId ".trim().toString()]||(()=>{}),H=0;function ae(t){const[e,s]=o.useState(z());return x(()=>{s(n=>n??String(H++))},[t]),t||(e?`radix-${e}`:"")}function K(t,e=globalThis?.document){const s=P(t);o.useEffect(()=>{const n=r=>{r.key==="Escape"&&s(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[s,e])}var $="DismissableLayer",m="dismissableLayer.update",X="dismissableLayer.pointerDownOutside",Y="dismissableLayer.focusOutside",R,S=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),q=o.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:d,onDismiss:l,...E}=t,u=o.useContext(S),[c,B]=o.useState(null),f=c?.ownerDocument??globalThis?.document,[,F]=o.useState({}),A=T(e,i=>B(i)),D=Array.from(u.layers),[N]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),W=D.indexOf(N),O=c?D.indexOf(c):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,L=O>=W,_=Q(i=>{const v=i.target,w=[...u.branches].some(p=>p.contains(v));!L||w||(r?.(i),d?.(i),i.defaultPrevented||l?.())},f),C=V(i=>{const v=i.target;[...u.branches].some(p=>p.contains(v))||(a?.(i),d?.(i),i.defaultPrevented||l?.())},f);return K(i=>{O===u.layers.size-1&&(n?.(i),!i.defaultPrevented&&l&&(i.preventDefault(),l()))},f),o.useEffect(()=>{if(c)return s&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(R=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),g(),()=>{s&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=R)}},[c,f,s,u]),o.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),g())},[c,u]),o.useEffect(()=>{const i=()=>F({});return document.addEventListener(m,i),()=>document.removeEventListener(m,i)},[]),h.jsx(b.div,{...E,ref:A,style:{pointerEvents:k?L?"auto":"none":void 0,...t.style},onFocusCapture:y(t.onFocusCapture,C.onFocusCapture),onBlurCapture:y(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:y(t.onPointerDownCapture,_.onPointerDownCapture)})});q.displayName=$;var G="DismissableLayerBranch",J=o.forwardRef((t,e)=>{const s=o.useContext(S),n=o.useRef(null),r=T(e,n);return o.useEffect(()=>{const a=n.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),h.jsx(b.div,{...t,ref:r})});J.displayName=G;function Q(t,e=globalThis?.document){const s=P(t),n=o.useRef(!1),r=o.useRef(()=>{});return o.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let E=function(){I(X,s,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=E,e.addEventListener("click",r.current,{once:!0})):E()}else e.removeEventListener("click",r.current);n.current=!1},d=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,s]),{onPointerDownCapture:()=>n.current=!0}}function V(t,e=globalThis?.document){const s=P(t),n=o.useRef(!1);return o.useEffect(()=>{const r=a=>{a.target&&!n.current&&I(Y,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function g(){const t=new CustomEvent(m);document.dispatchEvent(t)}function I(t,e,s,{discrete:n}){const r=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&r.addEventListener(t,e,{once:!0}),n?M(r,a):r.dispatchEvent(a)}var Z="Portal",ee=o.forwardRef((t,e)=>{const{container:s,...n}=t,[r,a]=o.useState(!1);x(()=>a(!0),[]);const d=s||r&&globalThis?.document?.body;return d?j.createPortal(h.jsx(b.div,{...n,ref:e}),d):null});ee.displayName=Z;export{q as D,ee as P,ae as u};
