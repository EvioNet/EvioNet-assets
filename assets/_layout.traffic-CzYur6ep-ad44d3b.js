import{g as M,r as y,j as e}from"./index-BwutXNrU-ad44d3b.js";import{C as D,a as v,b as C,c as w,d as k}from"./card-y9sD7IDo-ad44d3b.js";import{B as $}from"./badge-D4AEz2mi-ad44d3b.js";import{T as S,a as B,b as N,c,d as H,e as d}from"./table-gdvm4-kx-ad44d3b.js";import{T as R,a as q,b as E,c as I}from"./tooltip-CNwzTshF-ad44d3b.js";import{P as L,E as z}from"./page-header-D6sJ6hJY-ad44d3b.js";import{f as o,C as A,a as F,g as U}from"./formatters-DJmD54-F-ad44d3b.js";import{S as Q}from"./static-magic-card-4cxdDi2L-ad44d3b.js";import{c as i,B as g}from"./button-sGaAilqo-ad44d3b.js";import{C as b,a as V}from"./chevron-right-BnVAzw1J-ad44d3b.js";import{C as G}from"./calendar-B-1zVj6i-ad44d3b.js";import{D as J}from"./download-CPUYiJds-ad44d3b.js";import"./utils-XCGD-6Tw-ad44d3b.js";import"./index-Dc_FVRD7-ad44d3b.js";import"./index-Ca0X4iLh-ad44d3b.js";import"./index-D68o6UF7-ad44d3b.js";import"./index-BmmjHwOG-ad44d3b.js";import"./index-BJbJFzWK-ad44d3b.js";import"./index-CFK5D2Pj-ad44d3b.js";import"./index-D_mo4esx-ad44d3b.js";import"./index-UKOundqy-ad44d3b.js";import"./index-B6_V1-8a-ad44d3b.js";import"./package-DoRhA6yX-ad44d3b.js";import"./circle-check-big-GDcMs1tu-ad44d3b.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],O=i("arrow-down",K);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],X=i("arrow-up",W);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Z=i("chevron-left",Y);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],se=i("circle-question-mark",ee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ae=i("info",te);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],oe=i("upload",re);function j({title:f,value:t,description:a,icon:l}){return e.jsxs(Q,{gradientPosition:"right",children:[e.jsxs(v,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-start gap-2",children:[l,e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:f})]})}),e.jsx(w,{children:a})]}),e.jsx(k,{children:e.jsx("p",{className:"text-2xl font-bold",children:t})})]})}const De=function(){const t=M.useLoaderData(),[a,l]=y.useState(1),m=10,{paginatedData:P,totalPages:p}=y.useMemo(()=>{if(!t||t.length===0)return{paginatedData:[],totalPages:0};const s=(a-1)*m,r=s+m,T=t.slice(s,r),_=Math.ceil(t.length/m);return{paginatedData:T,totalPages:_}},[t,a,m]),x=t?.reduce((s,r)=>s+r.d,0)||0,h=t?.reduce((s,r)=>s+r.u,0)||0,u=x+h,n={download:o(x),upload:o(h),total:o(x+h),downloadPercent:u?(x/u*100).toFixed(1):"0",uploadPercent:u?(h/u*100).toFixed(1):"0"};return e.jsx(R,{children:e.jsxs("div",{className:"container mx-auto space-y-6",children:[e.jsx(L,{title:"流量统计",description:"查看您的流量使用记录和统计信息",icon:b}),e.jsx("div",{className:"rounded-md border px-4 py-3 bg-card",children:e.jsxs("p",{className:"text-sm",children:[e.jsx(ae,{className:"me-3 -mt-0.5 inline-flex text-blue-500",size:16,"aria-hidden":"true"}),"流量明细仅保留近一个月数据以供查询。"," "]})}),!t||t.length===0?e.jsx(z,{icon:A,title:"暂无流量记录",description:"当您开始使用服务后，流量记录将会显示在这里。您可以随时查看您的流量使用情况。"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(j,{title:"总下载流量",value:n.download,icon:e.jsx(O,{className:"h-5 w-5 text-green-500"}),description:`占比 ${n.downloadPercent}%`}),e.jsx(j,{title:"总上传流量",value:n.upload,icon:e.jsx(X,{className:"h-5 w-5 text-blue-500"}),description:`占比 ${n.uploadPercent}%`}),e.jsx(j,{title:"总计流量",value:n.total,icon:e.jsx(b,{className:"h-5 w-5 text-purple-500"}),description:`共 ${t.length} 条记录`})]}),e.jsxs(D,{className:"rounded-xl shadow-lg border border-border overflow-hidden",children:[e.jsxs(v,{className:"bg-muted/30 pb-2",children:[e.jsxs(C,{className:"text-base font-bold flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-primary"}),"详细流量记录"]}),e.jsxs(w,{className:"text-xs",children:["所有流量使用记录，共 ",t.length," 条"]})]}),e.jsx(k,{className:"p-0",children:e.jsxs(S,{children:[e.jsx(B,{children:e.jsxs(N,{className:"bg-muted",children:[e.jsx(c,{className:"font-medium px-2 py-2 sm:px-4 sm:py-3",children:"日期"}),e.jsx(c,{className:"font-medium px-2 py-2 sm:px-4 sm:py-3",children:"倍率"}),e.jsx(c,{className:"font-medium px-2 py-2 sm:px-4 sm:py-3",children:e.jsxs("div",{className:"flex items-center justify-start gap-1",children:[e.jsx(J,{className:"h-4 w-4"}),"下载流量"]})}),e.jsx(c,{className:"font-medium px-2 py-2 sm:px-4 sm:py-3",children:e.jsxs("div",{className:"flex items-center justify-start gap-1",children:[e.jsx(oe,{className:"h-4 w-4"}),"上传流量"]})}),e.jsx(c,{className:"font-medium px-2 py-2 sm:px-4 sm:py-3",children:e.jsxs("div",{className:"flex items-center justify-start gap-1",children:["总计",e.jsxs(q,{children:[e.jsx(E,{asChild:!0,children:e.jsx(se,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),e.jsx(I,{children:e.jsx("p",{children:"公式：(实际上行 + 实际下行) x 扣费倍率 = 扣除流量"})})]})]})})]})}),e.jsx(H,{children:P.map((s,r)=>e.jsxs(N,{className:"hover:bg-muted/50 transition-colors border-b border-border/50",children:[e.jsx(d,{className:"font-medium px-2 py-2 sm:px-4 sm:py-3",children:F(s.record_at)}),e.jsx(d,{className:"px-2 py-2 sm:px-4 sm:py-3",children:e.jsx($,{variant:"outline",className:"text-xs font-medium",children:s.server_rate})}),e.jsx(d,{className:"font-medium px-2 py-2 sm:px-4 sm:py-3",children:o(s.d)}),e.jsx(d,{className:"font-medium px-2 py-2 sm:px-4 sm:py-3",children:o(s.u)}),e.jsx(d,{className:"font-medium px-2 py-2 sm:px-4 sm:py-3",children:o(U(s.d,s.u,Number(s.server_rate)))})]},r))})]})}),p>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["共 ",t?.length||0," 条记录，第 ",a," / ",p," 页"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>l(s=>Math.max(s-1,1)),disabled:a===1,className:"h-8 px-3",children:[e.jsx(Z,{className:"h-4 w-4"}),"上一页"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>l(s=>Math.min(s+1,p)),disabled:a===p,className:"h-8 px-3",children:["下一页",e.jsx(V,{className:"h-4 w-4"})]})]})]})]})]})]})})};export{De as component};
