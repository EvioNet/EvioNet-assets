import{b as g,a as b,E as N,r as F,t as r,o as v,j as e,L as S,s as n}from"./index-zp2nMl9D-1751174980531.js";import{B as w}from"./button-Cqc4v3GU-1751174980531.js";import{u as y,a as C,F as E,b as l,c as i,d as m,e as c,f as d}from"./zod-BqX1wKj--1751174980531.js";import{I as x}from"./input-BhTRTT4z-1751174980531.js";import{l as R}from"./passport-yY3s5sUd-1751174980531.js";import{u as I}from"./index.esm-B4TPyIND-1751174980531.js";import"./utils-BIJI3SUY-1751174980531.js";import"./label-pehihN3l-1751174980531.js";import"./index-BT14nGiI-1751174980531.js";const L=v({email:n().email("请输入有效的邮箱地址"),password:n().min(6,"密码至少需要6个字符")}),G=function(){const u=g(),{setAuth:p}=b(),{state:o}=N.useSearch();F.useEffect(()=>{o==="Expired"&&r.error("您的登录已过期，请重新登录"),o==="Unauthorized"&&r.error("您需要先登录才能访问该页面")},[]);const t=y({resolver:C(L),defaultValues:{email:"",password:""}}),{send:f,loading:a}=I(({email:s,password:j})=>R({email:s,password:j}),{immediate:!1}).onSuccess(s=>{s.data.token&&(p(s.data),r.success("登录成功"),u({to:"/dashboard"}))}),h=s=>{f(s)};return e.jsx(E,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(h),className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"登录您的账户"}),e.jsx("p",{className:"text-muted-foreground text-sm text-balance",children:"请输入您的邮箱以登录您的账户"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx(l,{control:t.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx(m,{children:"邮箱"}),e.jsx(c,{children:e.jsx(x,{placeholder:"请输入您的邮箱",type:"email",autoComplete:"email",...s})}),e.jsx(d,{})]})}),e.jsx(l,{control:t.control,name:"password",render:({field:s})=>e.jsxs(i,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{children:"密码"}),e.jsx("a",{href:"#",className:"ml-auto text-sm underline-offset-4 hover:underline",children:"忘记密码？"})]}),e.jsx(c,{children:e.jsx(x,{type:"password",placeholder:"请输入您的密码",autoComplete:"current-password",...s})}),e.jsx(d,{})]})}),e.jsx(w,{type:"submit",className:"w-full",disabled:a,children:a?"登录中...":"登录"})]}),e.jsxs("div",{className:"text-center text-sm",children:["还没有账户？"," ",e.jsx(S,{to:"/register",className:"underline underline-offset-4",children:"注册"})]})]})})};export{G as component};
